# HTML

HTTP：一种让通信双方传输文本、文件、二进制数据的网络协议，网络通信双方都公认的格式规范

HTTP能够在网络设备之间传输HTML(超文本标记语言，表现形式为纯文本文件，使用超链接将不同空间组织在一起的网页文本)

这些网络资源被称为Web文档(也称Web页面)

一个完整的Web文档通常由多个不同的子文档拼接而成，包括文本(HTML文件)、布局描述(CSS文件)、图片、视频、脚本等

## HTML

网站的框架。<>为标签、成对出现。

```html
<html>..</html>    表示标记中间元素是网页
<body>..</body>    表示用户可见内容
<div>..</div>      表示框架
<p>..</p>          表示段落
<li>..</li>        表示列表
<img>..</img>      表示图片
<hi>..</hi>        表示标题
<a href="">..</a>  表示超链接
```

# HTTP协议与Web页面

## HTTP URL

HTTP使用户可以通过浏览器与互联网上的资源进行通信，要求用户知道资源位置

HTTP请求内容即资源，资源可以是任何格式数据，每个资源都有一个URI(统一标识符)标识。URI是一个指向资源的字符串，它包括URL(常用)与URN：

- URL(统一资源定位符)：指示Web上资源文件的具体位置，也被称为Web地址
- URN(统一资源名称)：在给定的命名空间用名字指向具体的资源。大致格式：`urn:<namespace_id>:<namespace_str>`

## 常见URL

### http://

方案或协议：告诉浏览器使用何种协议，对于Web资源通常为http或https。还有`mailto：`只是浏览器打开邮件客户端，`ftp：`只是浏览器处理文件传输

### www.example.com

主机名或域名或IP地址：指示向网络中哪一台主机发起请求

### :80

端口号(可选):指示访问Web服务器的端口号，http默认80，https默认443

### /path/to/myfile.html

路径：Web服务器上资源的路径

### ?key1=value1&key2=value2

查询(可选)：提供Web服务器的额外参数

### .............

片段(可选)：资源本身的某一部分的一个锚点，由浏览器处理

### HTTP报文

![image-20240428213816999](image-20240428213816999.png)

1. 第一行描述请求或状态信息
2. 可选的头集合描述消息(key：value形式，用于提示消息行为或描述消息正文)
3. 指示头部信息结束的一个空行
4. 可选正文

### HTTP请求

**![image-20240428214309149](image-20240428214309149.png)**

#### HTTP方法

指示对资源执行的期望动作

- GET：获取数据
- HEAD：请求一个与GET请求的响应相同的响应，但没有响应体
- POST：将实体提交到指定资源
- PUT:请求有效载荷替换目标资源的所有当前表示
- DELETE：删除指定资源

#### 请求目标

通常是URL，一般是一个指示请求资源的绝对路径

常见header：

- Host：指示请求资源所在主机
- Connection：指示HTTP请求是否能进行持久连接
- User-Agent:指明用户发送请求所使用的代理软件的应用类型、操作系统、软件开发商以及版本号等，通过此消息，服务器可知道用户发起请求所使用的工具，可进行定制化服务
- Content-Type:指示发送的消息体的内容的类型
- Content-Length:消息体的长度

消息体是可选的，一般GET、DELETE不带消息体，而POST、PUT带消息体

### HTTP响应

![image-20240430084722020](image-20240430084722020.png)

例如：`HTTP/1.1 200 OK`

状态行的核心是状态码，一般是三个数字，第一个是表示状态类型，后面的数组表示具体的状态信息。

### HTTP头部

头集合描述消息，用于传递关于请求或者响应的额外上下文和元数据

常见的HTTP响应的header包括：

- Connection:指示HTTP请求是否进行持久连接；
- Server：指示HTTP服务器的信息
- Cache-Control：对是否使用缓存进行控制
- Content-Type：指示发送的消息体的内容的类型
- Content-Length：消息体的长度

#### 一些重要HTTP Headers

##### User-Agent

特征字符串，用来让网络协议的对端来识别发起请求的用户代理软件(浏览器或其他发起HTTP请求的工具)的应用类型、操作系统、软件开发商以及版本号。

用来进行内容协商，源服务器选择合适内容或操作参数进行响应。

语法：

```http
User-Agent: <product> / <product-version> <comment>
```

`<product>`：产品标识码

`<product-version>`：产品版本号

`comment`：0或多个关于组成产品信息的注释

##### Cookies

Cookie使无状态的HTTP协议记录稳定的信息状态信息成为了可能

Cookie本质是服务器发送到用户浏览器并保存在用户本地的一小块数据，会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上

应用：

- 会话管理：登录状态、购物车……
- 个性化设置：用户自定义设置、主题……
- 浏览器行为跟踪：跟踪用户行为……

实现组件：

- HTTP响应报文头部字段的set-cookie行(服务器向客户端发送并设置cookie)
- 下一条HTTP请求报文头部字段的cookie行(设置服务器提供的cookie)
- Cookie文件(保存在用户的浏览器中)
- Web服务器后端数据库(存储cookie数据)

获取已经登录的用户的Cookies，实现对需要登录的内容进行爬取



























## 网络爬虫

实现定制化搜索引擎，按照自定义的规则采集数据，去掉无关的数据属性

### 分类

- 通用网络爬虫
- 聚焦网络爬虫
- 增量式网络爬虫
- 深层网络爬虫

### 合法性

几乎每个网站都有`robot.txt`文档

ep：`http://www.baidu.com/robots.txt`